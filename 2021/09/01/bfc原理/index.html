<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Papaya HUANG</title>
  <!-- add alifont -->

  <link
    rel="stylesheet"
    type="text/css"
    href="https://at.alicdn.com/t/c/font_2719161_qrg05vxlp7.css"
  />
  <!-- add style -->
  
<link rel="stylesheet" href="/css/style.css">

  <!-- add font-->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600&display=swap"
    rel="stylesheet"
  />
<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


  <body>
    <header>
  <ul class="navbar">
    <li>
      <a href="/">
        <i class="icon iconfont icon-xuanzhongshangcheng"></i>
      </a>
    </li>
    <li>
      <a href="/about">
        <i class="icon iconfont icon-about"></i>
      </a>
    </li>
    <li>
      <a href="/projects">
        <i class="icon iconfont icon-project"></i>
      </a>
    </li>
    <li>
      <a href="/categories">
        <i class="icon iconfont icon-case-file-full"></i>
      </a>
    </li>
    <li>
      <a href="/archives">
        <i class="icon iconfont icon-Artboard2"></i>
      </a>
    </li>
  </ul>
</header>

    <aside>
  <div class="menu">
    

    <a class="menu-item" href="/">Home</a>

    

    <a class="menu-item" href="/about">About</a>

    

    <a class="menu-item" href="/projects">Projects</a>

    

    <a class="menu-item" href="/categories">Categories</a>

    

    <a class="menu-item" href="/archives">Archives</a>

    
  
  </div>
</aside>


    <div class="main"><div class="blog-post">
  
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3-BFC"><span class="toc-text">如何理解 BFC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E5%AE%9A%E4%B9%89"><span class="toc-text">官方定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E8%A7%84%E5%88%99"><span class="toc-text">官方规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3"><span class="toc-text">个人理解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BFC-%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">BFC 的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%AD%A2%E5%A4%96%E8%BE%B9%E8%B7%9D%E6%8A%98%E5%8F%A0%EF%BC%88marigns-collapsing"><span class="toc-text">防止外边距折叠（marigns collapsing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8-Stops-content-wrapping-floats"><span class="toc-text">清除浮动(Stops content wrapping floats)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91-BFC-%E7%9A%84%E6%96%B0%E6%96%B9%E6%B3%95"><span class="toc-text">触发 BFC 的新方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text">参考资料</span></a></li></ol>
  <div class='blog-main'>

    <!-- title -->
    <h2 class="blog-post-title">
      <a href="/2021/09/01/bfc原理/">
        理解BFC
      </a>
    </h2>
  
    <!-- date and author -->
    <p class="blog-post-meta">
      2021-09-01 
    </p>
  
  
    <!-- content -->
    <div class="post-content">
      <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在搭建个人博客的时候我遇到一个 CSS 难题，就是在左右布局的时候，如何保持左边的任务栏宽度不变，在搜索资料的时候我发现了 BFC 这个概念，觉得非常实用，所以在这里整理和实践一下。</p>
<h2 id="如何理解-BFC"><a href="#如何理解-BFC" class="headerlink" title="如何理解 BFC"></a>如何理解 BFC</h2><h3 id="官方定义"><a href="#官方定义" class="headerlink" title="官方定义"></a>官方定义</h3><ul>
<li>BFC 的全称是<strong>Block Formatting Context</strong>(格式化上下文)；</li>
<li>BFC 是 W3C CSS2.1 规范中的一个渲染方式；</li>
<li>BFC 是归属于普通流（normal flow）的一种定位方式（postioning scheme）。</li>
</ul>
<h3 id="官方规则"><a href="#官方规则" class="headerlink" title="官方规则"></a>官方规则</h3><p>当一个 HTML 块元素满足以下任意一条规则，就可以构成 BFC</p>
<ul>
<li><code>float</code>的值不为<code>none</code>；</li>
<li><code>position</code>的值不为<code>static</code>或<code>relative</code>；</li>
<li><code>display</code>的值为<code>table-cell</code>, <code>table-caption</code>, <code>inline-block</code>, <code>flex</code>或者 <code>inline-flex</code>;</li>
<li><code>overflow</code>的值不为<code>visible</code>。</li>
</ul>
<h3 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h3><p>可以把整个页面看作一个元素的洋流（normal flow），而 BFC 的存在就像是这个洋流上的一个安全岛，在 BFC 中的元素可以独立于整个洋流的规则，并且有一套自己的规则。</p>
<h2 id="BFC-的应用"><a href="#BFC-的应用" class="headerlink" title="BFC 的应用"></a>BFC 的应用</h2><h3 id="防止外边距折叠（marigns-collapsing"><a href="#防止外边距折叠（marigns-collapsing" class="headerlink" title="防止外边距折叠（marigns collapsing)"></a>防止外边距折叠（marigns collapsing)</h3><p>假设有一个<code>&lt;div&gt;</code>单元叫做<code>.outer</code>，单元内部有两组<code>&lt;p&gt;</code>标签，格式如下：</p>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector"><span class="token class">.outer</span> </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#ccc</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">40</span>px <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">p </span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">20</span>px <span class="token number">0</span> <span class="token number">20</span>px <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">233</span>, <span class="token number">78</span>, <span class="token number">119</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>呈现效果如下：<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210902133622.png" alt="边距折叠演示"></p>
<p>如上图所示，出现了两个我们<em>意料之外</em>的效果：</p>
<ol>
<li>虽然每个<code>&lt;p&gt;</code>都设定了上下<code>margin</code>为<code>20px</code>，但是呈现出来的效果是两个<code>&lt;p&gt;</code>之间的边距被折叠成一个<code>20px</code>了;</li>
<li>两个<code>&lt;p&gt;</code>的上边框和下边框没有父元素的灰色。</li>
</ol>
<p>如果我们触发 BFC 就可以解决上述问题：</p>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector"><span class="token class">.outer</span> </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#ccc</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">40</span>px <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 触发BFC */</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>呈现效果如图：<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210902135519.png" alt="解决折叠演示"></p>
<ul>
<li>具体对比演示如下：</li>
</ul>
<iframe height="300" style="width: 100%;" scrolling="no" title="" src="https://codepen.io/papayahuang/embed/WNOwBaR?default-tab=js%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/papayahuang/pen/WNOwBaR">
  </a> by PapayaHUANG (<a target="_blank" rel="noopener" href="https://codepen.io/papayahuang">@papayahuang</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.
</iframe>

<h3 id="清除浮动-Stops-content-wrapping-floats"><a href="#清除浮动-Stops-content-wrapping-floats" class="headerlink" title="清除浮动(Stops content wrapping floats)"></a>清除浮动(Stops content wrapping floats)</h3><ul>
<li>这个主要被应用在分栏布局的页面中;</li>
<li>通常若一个块元素中包含一张图片，和一段文字，我们把图片向左浮动，文字就会包含图片，例子如下：</li>
</ul>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>float<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I am a floated element.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  I am text inside the outer box...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector"><span class="token class">.outer</span> </span><span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">5</span>px dotted <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">214</span>, <span class="token number">129</span>, <span class="token number">137</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">5</span>px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.float</span> </span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">5</span>px solid <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">214</span>, <span class="token number">129</span>, <span class="token number">137</span>, <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">5</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">233</span>, <span class="token number">78</span>, <span class="token number">119</span>, <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">20</span>px <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210902150812.png" alt="浮动展示图1"></p>
<p>如果把文本的字数变少，图片还会超出边框,这是因为父元素并没有设定高度，所以父元素的高度会随着内部的文字的高度的变化而变化</p>
<p><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210902152604.png" alt="浮动展示图2"></p>
<p>若要解决上述请看，我们可以在<code>.outer</code>触发 BFC，让容器脱离原本的 flow，包裹住浮动的元素<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210902153132.png" alt="浮动展示图3"></p>
<h2 id="触发-BFC-的新方法"><a href="#触发-BFC-的新方法" class="headerlink" title="触发 BFC 的新方法"></a>触发 BFC 的新方法</h2><p>在使用 overflow 来触发 BFC 的时候会有两个问题，第一个是没有使用 overflow 本来被设计出来的功能，可能会产生一些副效果，另一个是如果团队合作，这些使用 overflow 会造成歧义，让团队成员不好理解。</p>
<p>为了解决这个问题可以使用<code>display:flow-root</code>来触发 BFC。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://www.smashingmagazine.com/2017/12/understanding-css-layout-block-formatting-context/">Understanding CSS Layout And The Block Formatting Context - Rachel Andrew</a><br><a target="_blank" rel="noopener" href="https://www.sitepoint.com/understanding-block-formatting-contexts-in-css/">Understanding Block Formatting Context in CSS - Ritesh Kumar</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25321647">十分钟理解 BFC 原理 - 知乎 - 林东洲</a></p>

    </div>
  
    <hr>
    
    
       <!-- categories -->
    
       
    <span class="post-categories">
      <i class='icon iconfont icon-icon-goodscategory'></i>
      <a href="/categories/基础知识盘点/">基础知识盘点</a>
    </span>
    
    
       <!-- tag -->
     
    
    <span class="post-tags">
      <i class="icon iconfont icon-tag"></i>
      <a href="/tags/css/">css</a>
    </span>
    
  </div>
</div>


</div>
  
  </body>
</html>
