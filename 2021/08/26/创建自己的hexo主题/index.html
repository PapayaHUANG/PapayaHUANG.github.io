<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Papaya HUANG</title>
  <!-- add alifont -->

  <link
    rel="stylesheet"
    type="text/css"
    href="https://at.alicdn.com/t/c/font_2719161_qrg05vxlp7.css"
  />
  <!-- add style -->
  
<link rel="stylesheet" href="/css/style.css">

  <!-- add font-->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600&display=swap"
    rel="stylesheet"
  />
<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


  <body>
    <header>
  <ul class="navbar">
    <li>
      <a href="/">
        <i class="icon iconfont icon-xuanzhongshangcheng"></i>
      </a>
    </li>
    <li>
      <a href="/about">
        <i class="icon iconfont icon-about"></i>
      </a>
    </li>
    <li>
      <a href="/projects">
        <i class="icon iconfont icon-project"></i>
      </a>
    </li>
    <li>
      <a href="/categories">
        <i class="icon iconfont icon-case-file-full"></i>
      </a>
    </li>
    <li>
      <a href="/archives">
        <i class="icon iconfont icon-Artboard2"></i>
      </a>
    </li>
  </ul>
</header>

    <aside>
  <div class="menu">
    

    <a class="menu-item" href="/">Home</a>

    

    <a class="menu-item" href="/about">About</a>

    

    <a class="menu-item" href="/projects">Projects</a>

    

    <a class="menu-item" href="/categories">Categories</a>

    

    <a class="menu-item" href="/archives">Archives</a>

    
  
  </div>
</aside>


    <div class="main"><div class="blog-post">
  
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E4%B8%BB%E9%A2%98%E9%9C%80%E6%B1%82"><span class="toc-text">我的主题需求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E6%A1%86%E6%9E%B6"><span class="toc-text">主题框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87"><span class="toc-text">开发知识准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80"><span class="toc-text">前端开发基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E8%AF%AD%E6%B3%95"><span class="toc-text">模板引擎语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">CSS预处理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hexo%E6%96%87%E6%A1%A3"><span class="toc-text">Hexo文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">构建目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hexo%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">hexo工作原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%B8%83%E5%B1%80"><span class="toc-text">主题布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E6%A1%86%E6%9E%B6"><span class="toc-text">页面框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E5%87%BD%E6%95%B0"><span class="toc-text">重要函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E9%83%A8%E5%88%86"><span class="toc-text">固定部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%9B%BA%E5%AE%9A%E9%83%A8%E5%88%86%E6%A8%A1%E6%9D%BF"><span class="toc-text">其他固定部分模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E6%9B%BF%E6%8D%A2%E9%83%A8%E5%88%86"><span class="toc-text">可替换部分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E6%A1%86%E6%9E%B6"><span class="toc-text">网站框架</span></a></li></ol>
  <div class='blog-main'>

    <!-- title -->
    <h2 class="blog-post-title">
      <a href="/2021/08/26/创建自己的hexo主题/">
        创建自己的hexo主题（一）
      </a>
    </h2>
  
    <!-- date and author -->
    <p class="blog-post-meta">
      2021-08-26 
    </p>
  
  
    <!-- content -->
    <div class="post-content">
      <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文将记录我从零开始搭建一个hexo主题的过程。决定用hexo搭建自己的博客的时候，我就在物色合适的主题了，虽然hexo的主题库很丰富，但是大部分主题框架都满足不了我自己的需求，或者有些功能超出了我的需求。所以我决定自己来搭建一个hexo主题，顺便也练习一下前端的技术。</p>
<h2 id="我的主题需求"><a href="#我的主题需求" class="headerlink" title="我的主题需求"></a>我的主题需求</h2><h3 id="主题框架"><a href="#主题框架" class="headerlink" title="主题框架"></a>主题框架</h3><ul>
<li><p>我构想的主题是分为四个部分：<br>Index：主题首页放个人概要；<br>About：介绍页通过图片介绍个人情况；<br>Category：文章分类页，方便快速了解博文结构；<br>Posts：所有博文合集。</p>
</li>
<li><p>配色审美<br>我希望我的主题是浅色调的，配色不超过四种，重点用亮色突出；<br>同时主题可以响应不同尺寸窗口。</p>
</li>
<li><p>额外功能<br>作为目的为个人展示和学习记录的网站，hexo自带功能就可以满足我的所有需求。<br>所以我只需要利用好hexo自带的tags/categories/pagination就好。</p>
</li>
</ul>
<h2 id="开发知识准备"><a href="#开发知识准备" class="headerlink" title="开发知识准备"></a>开发知识准备</h2><h3 id="前端开发基础"><a href="#前端开发基础" class="headerlink" title="前端开发基础"></a>前端开发基础</h3><p>包括HTML CSS Javascript和NPM</p>
<h3 id="模板引擎语法"><a href="#模板引擎语法" class="headerlink" title="模板引擎语法"></a>模板引擎语法</h3><p>hexo内置的是ejs——<a target="_blank" rel="noopener" href="https://ejs.bootcss.com/">ejs文档</a>，当然也有比较受欢迎的主题使用的pug</p>
<h3 id="CSS预处理器"><a href="#CSS预处理器" class="headerlink" title="CSS预处理器"></a>CSS预处理器</h3><p>hexo内置的是stylus——<a target="_blank" rel="noopener" href="https://stylus-lang.com/">stylus文档</a><br>###YAML语法：<br>hexo内置config文件语法格式，<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2016/07/yaml.html">阮一峰YAML教程</a></p>
<h3 id="Hexo文档"><a href="#Hexo文档" class="headerlink" title="Hexo文档"></a>Hexo文档</h3><p>文档内会有一些hexo模板引擎的变量和辅助函数，对主题的编写很有帮助。<br>英文文档更详细，<a target="_blank" rel="noopener" href="https://hexo.io/docs/variables.html">Hexo文档</a></p>
<p>我编写的主题使用的ejs+stylus。</p>
<h2 id="构建目录结构"><a href="#构建目录结构" class="headerlink" title="构建目录结构"></a>构建目录结构</h2><p>根据<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/themes">官方文档</a>，hexo的主题文件夹，一般包含以下目录：</p>
<pre class="line-numbers language-bash"><code class="language-bash">  <span class="token keyword">.</span>
  ├── _config.yml <span class="token comment" spellcheck="true"># 主题配置文件</span>
  ├── languages <span class="token comment" spellcheck="true"># 语言文件夹</span>
  ├── layout <span class="token comment" spellcheck="true"># 页面模板</span>
  ├── scripts <span class="token comment" spellcheck="true"># 脚本文件夹</span>
  └── <span class="token function">source</span> <span class="token comment" spellcheck="true"># 资源文件夹</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="hexo工作原理"><a href="#hexo工作原理" class="headerlink" title="hexo工作原理"></a>hexo工作原理</h3><ul>
<li>ejs模板是组件化开发思路，使得页面内容可以复用；</li>
<li>hexo会先解析<em>markdown</em>文件，然后根据<em>layout</em>判断布局类型，再结合<em>config</em>中变量动态渲染出静态html页面；</li>
<li>stylus作为css预处理器，也可以提高代码的复用。</li>
</ul>
<h2 id="主题布局"><a href="#主题布局" class="headerlink" title="主题布局"></a>主题布局</h2><ul>
<li>本主题的布局会根据窗口宽度分为左右布局和上下布局两种；</li>
<li>主题布局分为两个部分，菜单栏和页面主体。<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210827214647.png" alt="左右布局"><br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/20210827214601.png" alt="上下布局"></li>
</ul>
<h2 id="页面框架"><a href="#页面框架" class="headerlink" title="页面框架"></a>页面框架</h2><p>根据上述布局就可以来编写页面框架了，hexo会首先根据<em>themes/yourtheme/layout/layout.ejs</em>进行最初的渲染，后续所有结构都是在这个文件中替换形成的。</p>
<pre class="line-numbers language-html"><code class="language-html">  layout/layout.ejs

  <span class="token doctype">&lt;!DOCTYPE html></span>
      &lt;%- partial('_partial/head') %>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
          &lt;%- partial('_partial/header',{cache:true}) %>
          &lt;%- partial('_partial/sidebar',{cache:true}) %>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%-</span> <span class="token attr-name">body</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="重要函数"><a href="#重要函数" class="headerlink" title="重要函数"></a>重要函数</h3><ul>
<li><code>partial()</code>函数用于导入一个模块。</li>
<li><code>&lt;%- %&gt;</code>为ejs的一个标记，输出非转义的数据到模板。</li>
</ul>
<h3 id="固定部分"><a href="#固定部分" class="headerlink" title="固定部分"></a>固定部分</h3><p>确定到layout.ejs的布局，就需要编写页面固定的部分， 在<em>layout/_partial/head.ejs</em>为head中需要声明的html页面头信息等:</p>
<pre class="line-numbers language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>IE<span class="token punctuation">=</span>edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="其他固定部分模板"><a href="#其他固定部分模板" class="headerlink" title="其他固定部分模板"></a>其他固定部分模板</h3><p>header和sidebar是我的导航栏，也可以用head的方式放在layout布局里</p>
<h3 id="可替换部分"><a href="#可替换部分" class="headerlink" title="可替换部分"></a>可替换部分</h3><p>body变量是hexo layout的重点，hexo每一个页面文件都包含一个body变量，也就是说包括index、about、categories等页面的内容都显示在 <code>&lt;%- body %&gt;</code>部分。<a target="_blank" rel="noopener" href="https://hexo.io/docs/templates.html">官方文档说明</a></p>
<h2 id="网站框架"><a href="#网站框架" class="headerlink" title="网站框架"></a>网站框架</h2><p>搭建好页面框架后就可以开始搭建网站框架了，如上文所述我需要再创建index/about、categories、archive四个页面;</p>
<p>除了在layout目录下要分别创建index.ejs, about.ejs, categories.ejs, archive.ejs四个文件以外，还需要在命令行输入相应的创建页面命令：</p>
<pre class="line-numbers language-zsh"><code class="language-zsh">  % hexo new page pagename
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>-创建好了页面，需要在每个页面的index.md文件中修改该文件的Front-matter，如该页面的布局为about的话，需要添加一个layout值<a target="_blank" rel="noopener" href="https://hexo.io/docs/front-matter">官方文档说明</a>：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">  <span class="token key atrule">title</span><span class="token punctuation">:</span> about
  <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2021-07-27 16:04:56</span>
  <span class="token key atrule">layout</span><span class="token punctuation">:</span> about
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

    </div>
  
    <hr>
    
    
       <!-- categories -->
    
       
    <span class="post-categories">
      <i class='icon iconfont icon-icon-goodscategory'></i>
      <a href="/categories/项目练习/">项目练习</a>
    </span>
    
    
       <!-- tag -->
     
    
    <span class="post-tags">
      <i class="icon iconfont icon-tag"></i>
      <a href="/tags/html/">html,</a><a href="/tags/ejs/">ejs,</a><a href="/tags/stylus/">stylus,</a>
    </span>
    
  </div>
</div>


</div>
  
  </body>
</html>
