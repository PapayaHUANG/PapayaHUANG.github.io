<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Papaya HUANG</title>
  <!-- add alifont -->

  <link
    rel="stylesheet"
    type="text/css"
    href="https://at.alicdn.com/t/c/font_2719161_qrg05vxlp7.css"
  />
  <!-- add style -->
  
<link rel="stylesheet" href="/css/style.css">

  <!-- add font-->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600&display=swap"
    rel="stylesheet"
  />
<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


  <body>
    <header>
  <ul class="navbar">
    <li>
      <a href="/">
        <i class="icon iconfont icon-xuanzhongshangcheng"></i>
      </a>
    </li>
    <li>
      <a href="/about">
        <i class="icon iconfont icon-about"></i>
      </a>
    </li>
    <li>
      <a href="/projects">
        <i class="icon iconfont icon-project"></i>
      </a>
    </li>
    <li>
      <a href="/categories">
        <i class="icon iconfont icon-case-file-full"></i>
      </a>
    </li>
    <li>
      <a href="/archives">
        <i class="icon iconfont icon-Artboard2"></i>
      </a>
    </li>
  </ul>
</header>

    <aside>
  <div class="menu">
    

    <a class="menu-item" href="/">Home</a>

    

    <a class="menu-item" href="/about">About</a>

    

    <a class="menu-item" href="/projects">Projects</a>

    

    <a class="menu-item" href="/categories">Categories</a>

    

    <a class="menu-item" href="/archives">Archives</a>

    
  
  </div>
</aside>


    <div class="main"><div class="blog-post">
  
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E6%A6%82%E5%BF%B5"><span class="toc-text">三个概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E8%A7%A3%E5%86%B3%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-text">需解决的几个问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BC%82%E6%AD%A5JavaScript-JS%E4%B8%AD%E7%9A%84%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5"><span class="toc-text">什么是异步JavaScript&#x2F;JS中的同步和异步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E7%94%A8%E5%88%B0%E5%BC%82%E6%AD%A5"><span class="toc-text">什么时候会用到异步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS%E5%BC%82%E6%AD%A5%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BD%A2%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-text">JS异步的表达形式有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Callback%EF%BC%88%E5%9B%9E%E8%B0%83%EF%BC%89%E5%9C%A8js%E4%B8%AD%E7%9A%84%E8%BF%90%E7%94%A8"><span class="toc-text">Callback（回调）在js中的运用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E5%9B%9E%E8%B0%83"><span class="toc-text">什么时候使用回调</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#promise%E5%9C%A8js%E4%B8%AD%E7%9A%84%E8%BF%90%E7%94%A8"><span class="toc-text">promise在js中的运用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Async-Await%E5%9C%A8JS%E4%B8%AD%E7%9A%84%E8%BF%90%E7%94%A8"><span class="toc-text">Async&#x2F;Await在JS中的运用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%EF%BC%9A"><span class="toc-text">参考资料：</span></a></li></ol>
  <div class='blog-main'>

    <!-- title -->
    <h2 class="blog-post-title">
      <a href="/2021/06/25/概念async-await/">
        Async/Await
      </a>
    </h2>
  
    <!-- date and author -->
    <p class="blog-post-meta">
      2021-06-25 
    </p>
  
  
    <!-- content -->
    <div class="post-content">
      <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前在项目练习的时候碰到了async/await，刚好在fcc的论坛也看到相应的文章。所以跟着文章练习，并总结一下关于async/await的知识点。</p>
<h2 id="三个概念"><a href="#三个概念" class="headerlink" title="三个概念"></a>三个概念</h2><ul>
<li>Callbacks</li>
<li>Promises</li>
<li>Async/Await</li>
</ul>
<h2 id="需解决的几个问题"><a href="#需解决的几个问题" class="headerlink" title="需解决的几个问题"></a>需解决的几个问题</h2><ul>
<li>什么是异步JavaScript</li>
<li>JS中的同步和异步</li>
<li>Callbacks/Promises/Async/Await如何在JS中运用</li>
</ul>
<h3 id="什么是异步JavaScript-JS中的同步和异步"><a href="#什么是异步JavaScript-JS中的同步和异步" class="headerlink" title="什么是异步JavaScript/JS中的同步和异步"></a>什么是异步JavaScript/JS中的同步和异步</h3><p>在解决这个问题之前，要先解决何为异步。<br>基本上计算语言都是<em>单线程（single-threaded）</em>的，也就是一个接一个的任务排队运行，而异步用一句话概括就是几个任务同时运行。</p>
<h3 id="什么时候会用到异步"><a href="#什么时候会用到异步" class="headerlink" title="什么时候会用到异步"></a>什么时候会用到异步</h3><p>当从外部设备抓取（fetch）资源的时候，如：<br>从网络上下载一个文件；<br>向数据库接收以及发送数据、从网络相机获取视频流等。</p>
<h3 id="JS异步的表达形式有哪些？"><a href="#JS异步的表达形式有哪些？" class="headerlink" title="JS异步的表达形式有哪些？"></a>JS异步的表达形式有哪些？</h3><p>callbacks（旧）和promises（新）<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/synchronous.png" alt="同步"><br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/asynchoronous.png" alt="异步"></p>
<h3 id="Callback（回调）在js中的运用"><a href="#Callback（回调）在js中的运用" class="headerlink" title="Callback（回调）在js中的运用"></a>Callback（回调）在js中的运用</h3><pre class="line-numbers language-javascript"><code class="language-javascript">  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
     <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'You clicked me!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token keyword">let</span> pElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     pElem<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'This is a newly-added paragraph.'</span><span class="token punctuation">;</span>
     document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>pElem<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里的<code>addEventListener()</code>第二个参数就是典型的callback；<br><code>setTimeout()</code>的第一个参数也使用了回调函数。<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/callback.png" alt="回调"></p>
<h3 id="什么时候使用回调"><a href="#什么时候使用回调" class="headerlink" title="什么时候使用回调"></a>什么时候使用回调</h3><p>把一个复杂的任务分解成更小的步骤；<br>根据时间或顺序把这些步骤之间建立联系。</p>
<p>使用回调的问题：<br>由于回调会产生嵌套，太多回调就会产生回调地狱。<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/callback%20hell.png" alt="回调地狱"><br>此时，promise就登场了。</p>
<h3 id="promise在js中的运用"><a href="#promise在js中的运用" class="headerlink" title="promise在js中的运用"></a>promise在js中的运用</h3><pre class="line-numbers language-javascript"><code class="language-javascript">  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'products.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> products <span class="token operator">=</span> json<span class="token punctuation">;</span>
         <span class="token function">initialize</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Fetch problem: '</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>fetch（）</code>就是一个典型的promise的例子<br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/promise%20format.png" alt="promise格式"><br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/promise%20made.png" alt="promise结构1"><br><img src="https://raw.githubusercontent.com/PapayaHUANG/images/main/img/promise.png" alt="promise结构2"></p>
<h3 id="Async-Await在JS中的运用"><a href="#Async-Await在JS中的运用" class="headerlink" title="Async/Await在JS中的运用"></a>Async/Await在JS中的运用</h3><p>Async/Await是更为简洁的编写promise的方式。</p>
<h2 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h2><p><a target="_blank" rel="noopener" href="https://chinese.freecodecamp.org/news/javascript-async-await-tutorial-learn-callbacks-promises-async-await-by-making-icecream/">JavaScript Async/Await教程 - freeCodeCamp - Miever</a><br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous">异步JavaScript - MDN</a></p>

    </div>
  
    <hr>
    
    
       <!-- categories -->
    
       
    <span class="post-categories">
      <i class='icon iconfont icon-icon-goodscategory'></i>
      <a href="/categories/基础知识盘点/">基础知识盘点</a>
    </span>
    
    
       <!-- tag -->
     
    
    <span class="post-tags">
      <i class="icon iconfont icon-tag"></i>
      <a href="/tags/js/">js</a>
    </span>
    
  </div>
</div>


</div>
  
  </body>
</html>
