<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Papaya HUANG</title>
  <!-- add alifont -->

  <link
    rel="stylesheet"
    type="text/css"
    href="https://at.alicdn.com/t/c/font_2719161_qrg05vxlp7.css"
  />
  <!-- add style -->
  
<link rel="stylesheet" href="/css/style.css">

  <!-- add font-->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600&display=swap"
    rel="stylesheet"
  />
<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


  <body>
    <header>
  <ul class="navbar">
    <li>
      <a href="/">
        <i class="icon iconfont icon-xuanzhongshangcheng"></i>
      </a>
    </li>
    <li>
      <a href="/about">
        <i class="icon iconfont icon-about"></i>
      </a>
    </li>
    <li>
      <a href="/projects">
        <i class="icon iconfont icon-project"></i>
      </a>
    </li>
    <li>
      <a href="/categories">
        <i class="icon iconfont icon-case-file-full"></i>
      </a>
    </li>
    <li>
      <a href="/archives">
        <i class="icon iconfont icon-Artboard2"></i>
      </a>
    </li>
  </ul>
</header>

    <aside>
  <div class="menu">
    

    <a class="menu-item" href="/">Home</a>

    

    <a class="menu-item" href="/about">About</a>

    

    <a class="menu-item" href="/projects">Projects</a>

    

    <a class="menu-item" href="/categories">Categories</a>

    

    <a class="menu-item" href="/archives">Archives</a>

    
  
  </div>
</aside>


    <div class="main"><div class="blog-post">
  
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-DOM-Tree-%E5%88%B0-Host-Tree-%E5%88%B0-React"><span class="toc-text">从 DOM Tree 到 Host Tree 到 React</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM-nodes-%E5%92%8C-React-Elements"><span class="toc-text">DOM nodes 和 React Elements</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM-nodes"><span class="toc-text">DOM nodes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E6%B8%B2%E6%9F%93%E5%99%A8"><span class="toc-text">React 渲染器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-Elements"><span class="toc-text">React Elements</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E7%82%B9"><span class="toc-text">接入点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text">参考资料</span></a></li></ol>
  <div class='blog-main'>

    <!-- title -->
    <h2 class="blog-post-title">
      <a href="/2022/10/18/react学习笔记/">
        React学习笔记（一）
      </a>
    </h2>
  
    <!-- date and author -->
    <p class="blog-post-meta">
      2022-10-18 
    </p>
  
  
    <!-- content -->
    <div class="post-content">
      <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我自己已经使用了 React 一段时间，期间感受到了它带来的方便，也遭遇过一些 bugs，基本的使用方法我已经比较属性，所以感觉现阶段更重要的是总结一下基础原理，这样可以帮助自己在日后主动绕开一些 bug。</p>
<h3 id="从-DOM-Tree-到-Host-Tree-到-React"><a href="#从-DOM-Tree-到-Host-Tree-到-React" class="headerlink" title="从 DOM Tree 到 Host Tree 到 React"></a>从 DOM Tree 到 Host Tree 到 React</h3><p><strong>DOM</strong>是连接 JavaScript 和 HTML 的接口，它提供一系列 API，帮助我们使用 JavaScript 来改变 HTML。</p>
<p>而这一系列 API 之所以可以被调用，要归功于 DOM tree。DOM tree 通过 DOM 将 HTML 页面进行解析，并生成 HTML tree 树状结构和对应的访问方法。</p>
<p>由此就可以总结以下规律：</p>
<ol>
<li>DOM tree 是用来展现 UI；</li>
<li>DOM 有自己的 API。</li>
</ol>
<p>那么 React 也有自己的 host tree，而 React 被用来控制复杂的 host tree。</p>
<p>React 在控制 Host Tree 的时候，遵循两个原则：</p>
<ol>
<li><p>稳定性<br>host tree 一般来说都比较稳定，在更新的时候不会发生巨变，难道你想要自己的页面起飞？</p>
</li>
<li><p>规则性<br>host tree 可以被拆分成不同的 UI 模块，这些 UI 模块可以保持行为的一致性。</p>
</li>
</ol>
<h3 id="DOM-nodes-和-React-Elements"><a href="#DOM-nodes-和-React-Elements" class="headerlink" title="DOM nodes 和 React Elements"></a>DOM nodes 和 React Elements</h3><h4 id="DOM-nodes"><a href="#DOM-nodes" class="headerlink" title="DOM nodes"></a>DOM nodes</h4><p>在 Host tree 上的节点被称作 host 实例（host instance）， 在 DOM 环境中，这些节点就是 DOM nodes，上文说提到的 API，基本上都是对这些节点的调用，这些节点有自己的属性（如：<code>domNode.childNodes</code>)和方法（如：<code>domNode.appendChild()</code>)。</p>
<p>而在 React 中，并不是我们直接调用这些 API，这些调用 API 的工作由 React 来执行，而 React 使用自己的渲染器（renderer）。</p>
<h4 id="React-渲染器"><a href="#React-渲染器" class="headerlink" title="React 渲染器"></a>React 渲染器</h4><p>DOM 的渲染器采用的是 <em>“可修改”模式（”mutating” mode)</em> ，就如上面介绍的属性的方法的使用所导致的结果，我们可以随意修改一个 node。</p>
<p>而 React 还提供一种模式——_“持续”模式（”persistent” mode)_，在这种模式下，会复制父级树，然后替换掉第一层级的子级节点。</p>
<h4 id="React-Elements"><a href="#React-Elements" class="headerlink" title="React Elements"></a>React Elements</h4><p>node 是 DOM 环境中的最小构建单位，而在 React 中，就是 React Element。React Element 是一个简单的 JavaScript 对象。</p>
<p>说<strong>简单</strong>是因为：</p>
<ol>
<li>它没有和任何 host 实例绑定；</li>
<li>它只用作介绍一个 host 实例。</li>
</ol>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// JSX is a syntax sugar for these objects.</span>
<span class="token comment" spellcheck="true">// &lt;dialog></span>
<span class="token comment" spellcheck="true">//   &lt;button className="blue" /></span>
<span class="token comment" spellcheck="true">//   &lt;button className="red" /></span>
<span class="token comment" spellcheck="true">// &lt;/dialog></span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'dialog'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>虽然 React element 不可以被改变，但是他们随时可以被重新创建和清除。</p>
<h3 id="接入点"><a href="#接入点" class="headerlink" title="接入点"></a>接入点</h3><p>既然 React Element 不和 host 实例绑定，那我们如何通过 React 来控制 host tree 呢？在 React DOM 中，我们使用<code>ReactDOM.render</code>:</p>
<pre class="line-numbers language-javascript"><code class="language-javascript">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>reactElement<span class="token punctuation">,</span> domContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后 react 就根据具体的 react element 的描述，来创建 host 实例，并且设置要实例的属性。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果不使用 React 这样的前端库，我们会直接使用 JavaScript 来操控页面 HTML，而这个操控是通过 DOM 来实现的。<br>所以对比 DOM 和 React 可以更方便我们来理解 React 的工作原理。</p>
<p>DOM 的设计底层逻辑是<strong>mutating model</strong>,所以 DOM 提供了丰富的 API，帮助我们实现更改不同的节点。</p>
<p>而在 React 中，我们并没有直接操控节点，而是通过 React 来完成这些操作，React 提供类似 DOM node 的 React Element 来给程序提供“快照”，由通过 render 来把这些“快照”和 host 实例连接起来。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://overreacted.io/react-as-a-ui-runtime/">React as a UI Runtime - Dan Abramov</a></p>

    </div>
  
    <hr>
    
    
       <!-- categories -->
    
       
    <span class="post-categories">
      <i class='icon iconfont icon-icon-goodscategory'></i>
      <a href="/categories/基础知识盘点/">基础知识盘点</a>
    </span>
    
    
       <!-- tag -->
     
    
    <span class="post-tags">
      <i class="icon iconfont icon-tag"></i>
      <a href="/tags/react/">react</a>
    </span>
    
  </div>
</div>


</div>
  
  </body>
</html>
